
R version 3.0.0 (2013-04-03) -- "Masked Marvel"
Copyright (C) 2013 The R Foundation for Statistical Computing
Platform: x86_64-unknown-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> ## Regression tests for R >= 3.0.0
> 
> pdf("reg-tests-1c.pdf", encoding = "ISOLatin1.enc")
> 
> ## mapply with classed objects with length method
> ## was not documented to work in 2.x.y
> setClass("A", representation(aa = "integer"))
> a <- new("A", aa = 101:106)
> setMethod("length", "A", function(x) length(x@aa))
[1] "length"
> setMethod("[[", "A", function(x, i, j, ...) x@aa[[i]])
[1] "[["
> (z <- mapply(function(x, y) {x * y}, a, rep(1:3, 2)))
[1] 101 204 309 104 210 318
> stopifnot(z == c(101, 204, 309, 104, 210, 318))
> ## reported as a bug (which it was not) by H. Pages in
> ## https://stat.ethz.ch/pipermail/r-devel/2012-November/065229.html
> 
> ## recyling in split()
> ## https://stat.ethz.ch/pipermail/r-devel/2013-January/065700.html
> x <- 1:6
> y <- split(x, 1:2)
> class(x) <- "A"
> yy <- split(x, 1:2)
> stopifnot(identical(y, yy))
> ## were different in R < 3.0.0
> 
> 
> ## dates with fractional seconds after 2038 (PR#15200)
> ## Extremely speculative!
> z <- as.POSIXct(2^31+c(0.4, 0.8), origin=ISOdatetime(1970,1,1,0,0,0,tz="GMT"))
> zz <- format(z)
> stopifnot(zz[1] == zz[2])
> ## printed form rounded not truncated in R < 3.0.0
> 
